name: go test & lint
on:
  push:
    tags-ignore:
      - "*"
jobs:

  test_lint:
    name: test & lint
    runs-on: ubuntu-latest
    steps:

    - name: set up go 1.14
      uses: actions/setup-go@v1
      with:
        go-version: 1.14
      id: go

    - name: checkout code
      uses: actions/checkout@v2

    - name: go test
      run: go test ./pkg/...

    - name: golangci-lint
      uses: actions-contrib/golangci-lint@v1
      env:
        GOROOT: ""
